/* popup.css — iOS share-sheet styling, now forces a full sheet (popup, not new tab) */

:root {
  --radius-card: 18px;
  --radius-field: 12px;
  --pad: 16px;
  --pill-h: 56px;
  --title-lg: 34px; /* Large Title */
  --text: #111111;
  --sub: #6e6e73;
  --bg: #ffffff;
  --card: #f2f2f7;        /* secondarySystemBackground */
  --hair: #d2d2d7;        /* separator */
  --accent: #0a84ff;      /* systemBlue */
  --pill-secondary: #edf0f5;
  --ok: #3ddc84;
  --err: #ff453a;
  font: -apple-system-body;
}

@media (prefers-color-scheme: dark) {
  :root {
    --text: #e9eaed;
    --sub: #a2a6ad;
    --bg: #0b0c0d;
    --card: #17181a;
    --hair: #2a2c30;
    --pill-secondary: #222427;
  }
}

* { box-sizing: border-box; }
html, body { margin: 0; padding: 0; background: var(--bg); color: var(--text); }

/* Keep popup; request Safari’s “large detent” by making content tall. */
#app {
  width: min(440px, 100vw);
  min-height: 92dvh;                 /* <- key change: push to full-sheet height */
  padding-bottom: env(safe-area-inset-bottom);
}

.mono { font-family: ui-monospace, Menlo, Consolas, monospace; white-space: pre-wrap; }
pre { white-space: pre-wrap; word-break: break-word; }

/* Toolbar (Large Title + Cancel on the right) */
.toolbar {
  position: sticky;
  top: 0; z-index: 10;
  display: flex; align-items: center; justify-content: space-between;
  padding: env(safe-area-inset-top) var(--pad) var(--pad) var(--pad);
  background: var(--bg);
  border-bottom: 1px solid var(--hair);
}
.toolbar-title {
  text-align: left;
  font-weight: 800;
  font-size: var(--title-lg);
  letter-spacing: -0.2px;
  margin: 2px 0 0 0;
  flex: 1;
}
.pill {
  border: none; outline: none; cursor: pointer;
  padding: 8px 14px;
  border-radius: 9999px;
  font-weight: 600;
  background: var(--pill-secondary);
  color: var(--text);
}
.pill.primary {
  background: linear-gradient(135deg, var(--accent), rgba(10,132,255,0.9));
  color: #fff;
}

/* Views */
.view { display: none; padding: 0 var(--pad) var(--pad) var(--pad); }
.view.active { display: block; }
.sheet-title { display: none; }

/* Labels */
.group-label {
  color: var(--sub);
  margin: 16px 0 8px 0;
  font-weight: 600; font-size: 12px; letter-spacing: .2px;
}

/* Selection “card” */
.selection {
  background: var(--card);
  border: 1px solid var(--hair);
  border-radius: var(--radius-card);
  padding: 12px;
  max-height: 160px;
  overflow: auto;
  white-space: pre-wrap;
}

/* Home action rows — 56pt pill buttons */
.home-actions { display: grid; grid-auto-rows: var(--pill-h); row-gap: 12px; margin-top: 10px; }
.home-actions .btn {
  display: flex; align-items: center; gap: 10px;
  width: 100%; height: var(--pill-h);
  padding: 0 16px;
  border-radius: 9999px;
  border: 0.5px solid color-mix(in oklab, var(--hair) 18%, transparent);
  background: var(--pill-secondary);
  color: var(--text);
  font: -apple-system-body;
  font-weight: 600;
  cursor: pointer;
}
.home-actions .btn.primary {
  background: linear-gradient(135deg, var(--accent), rgba(10,132,255,0.9));
  color: #fff;
  border: none;
}

/* Forms (editors) */
.form-row { display: flex; gap: 10px; align-items: center; margin-bottom: 10px; }
.form-row.split > * { flex: 1; }
input[type="text"], input[type="number"], input[type="datetime-local"], textarea {
  appearance: none;
  width: 100%;
  background: var(--card);
  color: var(--text);
  border: 1px solid var(--hair);
  border-radius: var(--radius-field);
  padding: 12px 14px;
}
textarea { resize: vertical; }

/* Status */
.status { min-height: 20px; margin: 10px 0 2px 0; font-weight: 600; }
.status.ok { color: var(--ok); }
.status.err { color: var(--err); }

/* Footer rows (editor bottoms) */
.button-row { display: flex; justify-content: flex-end; gap: 8px; margin-top: 8px; }
.button-row.left { justify-content: flex-start; }

/* Contact list rows */
.list .row { display: flex; align-items: center; gap: 8px; margin-bottom: 8px; }
.list .row input { flex: 1; }
.list .row button {
  border: none; background: var(--pill-secondary);
  color: var(--text); border-radius: 8px; padding: 6px 10px; cursor: pointer;
}

/* iOS-ish switch */
.switch { position: relative; width: 48px; height: 28px; display: inline-block; }
.switch input { opacity: 0; width: 0; height: 0; }
.slider { position: absolute; inset: 0; border-radius: 999px; background: color-mix(in oklab, var(--hair) 60%, transparent); transition: all .2s; }
.slider:before { content:""; position: absolute; height: 22px; width: 22px; left: 3px; top: 3px; background: white; border-radius: 50%; transition: all .2s; }
.switch input:checked + .slider { background: var(--accent); }
.switch input:checked + .slider:before { transform: translateX(20px); }
